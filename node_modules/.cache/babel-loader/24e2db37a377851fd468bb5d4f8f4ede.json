{"ast":null,"code":"import _objectSpread from\"/Users/beckybutton/Documents/GitHub/ethcc1/nftminter/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/beckybutton/Documents/GitHub/ethcc1/nftminter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/beckybutton/Documents/GitHub/ethcc1/nftminter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/beckybutton/Documents/GitHub/ethcc1/nftminter/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useSnackbar}from\"notistack\";import{uploadImageToIpfs,NftMint,NftStatus}from\"../action/nft\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Form=function Form(){var _useState=useState({name:\"\",description:\"\",external_url:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),txn_id=_useState8[0],setTxnId=_useState8[1];var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var address,fdata,ipfsHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();address=localStorage.getItem(\"onec-address\");if(address){_context.next=5;break;}enqueueSnackbar(\"Please connect your wallet\",{variant:\"error\",autoHideDuration:2000});return _context.abrupt(\"return\");case 5:if(!(image.size>3000000)){_context.next=8;break;}enqueueSnackbar(\"Image size should be less than 3mb\",{variant:\"error\",autoHideDuration:2000});return _context.abrupt(\"return\");case 8:// setLoading(true);\nfdata=new FormData();// console.log(\"image\", image);\nfdata.append(\"FILE\",image);_context.next=12;return uploadImageToIpfs(fdata);case 12:ipfsHash=_context.sent;console.log(\"ipfsHash\",ipfsHash);// enqueueSnackbar(\"Image uploaded to IPFS\", {\n//   variant: \"success\",\n//   autoHideDuration: 2000,\n// });\n// const res = await NftMint(\n//   {\n//     name: formData.name,\n//     description: formData.description,\n//     image: ipfsHash.file_hashes[0].Hash,\n//     external_url: formData.external_url,\n//   },\n//   address\n// );\n// enqueueSnackbar(\"Metadata uploaded to ipfs\", {\n//   variant: \"success\",\n//   autoHideDuration: 2000,\n// });\n// const myinterval = setInterval(async () => {\n//   const stat = await NftStatus(res.nft_ids[0]);\n//   if (stat.display == \"Creation success\") {\n//     setLoading(false);\n//     clearInterval(myinterval);\n//     setTxnId(stat.txn_id);\n//     enqueueSnackbar(\"NFT Minted Successfully!!\", {\n//       variant: \"success\",\n//       autoHideDuration: 3000,\n//     });\n//     setFormData({\n//       name: \"\",\n//       description: \"\",\n//       external_url: \"\",\n//     });\n//     setImage(\"\");\n//   }\n// }, 2000);\ncase 14:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl lg:max-w-screen-xl mx-auto lg:px-32\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-2xl rounded-2xl  bg-white \",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-semibold px-6 pt-4 pb-4 border-b\",children:[\"Mint your NFTs on\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"purple-text font-bold\",children:\"Polygon\"})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"p-5 py-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-2/5 w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-1 z-20 relative overflow-hidden \",children:[/*#__PURE__*/_jsx(\"div\",{className:\" rounded-lg mx-4 flex flex-col justify-center items-center h-60 border-dashed border-2 border-black\",children:image?/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(image),alt:\"image\",style:{height:\"inherit\",width:\"inherit\"},className:\"p-2\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Browse Files\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:\"Supports JPG, PNG and MP4 videos. Max file size : 3MB.\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,accept:\"image/*\",name:\"image\",className:\"absolute inset-0 opacity-0 text-transparent bg-transparent border-0\",multiple:false,onChange:function onChange(e){return setImage(e.target.files[0]);}}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-3/5 w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"dark-text text-lg pb-2 font-semibold\",children:[\"Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.name,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));},placeholder:\"Project Title\",className:\"border text-gray-600  px-2 w-full py-2  focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-lg dark-text pb-2 font-semibold\",children:[\"Description \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-700\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",rows:\"3\",required:true,value:formData.description,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value}));},placeholder:\"Short Description(max 300 characters)\",maxLength:\"300\",className:\"border text-gray-600 mb-2 px-2 w-full py-1 focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-lg dark-text pb-2 font-semibold\",children:\"Social URL (optional)\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.external_url,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{external_url:e.target.value}));},placeholder:\"Project URL\",className:\"border text-gray-600  px-2 w-full py-2 focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"dark-bg light-text font-semibold text-lg py-2 w-40 rounded-2xl focus:outline-none focus:shadow-outline\",children:loading?\"minting...\":\"Mint your NFT\"}),txn_id&&/*#__PURE__*/_jsx(\"a\",{href:\"https://mumbai.polygonscan.com/tx/\".concat(txn_id),target:\"_blank\",className:\"text-sm underline block mt-4 dark-text\",children:\"Click here to check Transaction\"})]})]})]})})]})});};export default Form;","map":{"version":3,"sources":["/Users/beckybutton/Documents/GitHub/ethcc1/nftminter/src/component/Form.js"],"names":["React","useState","useSnackbar","uploadImageToIpfs","NftMint","NftStatus","Form","name","description","external_url","formData","setFormData","image","setImage","loading","setLoading","txn_id","setTxnId","enqueueSnackbar","handleSubmit","e","preventDefault","address","localStorage","getItem","variant","autoHideDuration","size","fdata","FormData","append","ipfsHash","console","log","URL","createObjectURL","height","width","target","files","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useSnackbar } from \"notistack\";\nimport { uploadImageToIpfs, NftMint, NftStatus } from \"../action/nft\";\nconst Form = () => {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    description: \"\",\n    external_url: \"\",\n  });\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [txn_id, setTxnId] = useState(\"\");\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    let address = localStorage.getItem(\"onec-address\");\n    if (!address) {\n      enqueueSnackbar(\"Please connect your wallet\", {\n        variant: \"error\",\n        autoHideDuration: 2000,\n      });\n      return;\n    }\n\n    // check image size if less than 3mb\n    if (image.size > 3000000) {\n      enqueueSnackbar(\"Image size should be less than 3mb\", {\n        variant: \"error\",\n        autoHideDuration: 2000,\n      });\n      return;\n    }\n\n    // setLoading(true);\n    const fdata = new FormData();\n    // console.log(\"image\", image);\n    fdata.append(\"FILE\", image);\n    const ipfsHash = await uploadImageToIpfs(fdata);\n    console.log(\"ipfsHash\", ipfsHash);\n    // enqueueSnackbar(\"Image uploaded to IPFS\", {\n    //   variant: \"success\",\n    //   autoHideDuration: 2000,\n    // });\n    // const res = await NftMint(\n    //   {\n    //     name: formData.name,\n    //     description: formData.description,\n    //     image: ipfsHash.file_hashes[0].Hash,\n    //     external_url: formData.external_url,\n    //   },\n    //   address\n    // );\n    // enqueueSnackbar(\"Metadata uploaded to ipfs\", {\n    //   variant: \"success\",\n    //   autoHideDuration: 2000,\n    // });\n    // const myinterval = setInterval(async () => {\n    //   const stat = await NftStatus(res.nft_ids[0]);\n    //   if (stat.display == \"Creation success\") {\n    //     setLoading(false);\n    //     clearInterval(myinterval);\n    //     setTxnId(stat.txn_id);\n    //     enqueueSnackbar(\"NFT Minted Successfully!!\", {\n    //       variant: \"success\",\n    //       autoHideDuration: 3000,\n    //     });\n    //     setFormData({\n    //       name: \"\",\n    //       description: \"\",\n    //       external_url: \"\",\n    //     });\n    //     setImage(\"\");\n    //   }\n    // }, 2000);\n  };\n\n  return (\n    <div className=\"max-w-xl lg:max-w-screen-xl mx-auto lg:px-32\">\n      <div className=\"shadow-2xl rounded-2xl  bg-white \">\n        <p className=\"text-2xl font-semibold px-6 pt-4 pb-4 border-b\">\n          Mint your NFTs on{\" \"}\n          <span className=\"purple-text font-bold\">Polygon</span>\n        </p>\n        <form onSubmit={handleSubmit} className=\"p-5 py-16\">\n          <div className=\"flex flex-wrap\">\n            <div className=\"md:w-2/5 w-full\">\n              <div className=\"mb-1 z-20 relative overflow-hidden \">\n                <div className=\" rounded-lg mx-4 flex flex-col justify-center items-center h-60 border-dashed border-2 border-black\">\n                  {image ? (\n                    <img\n                      src={URL.createObjectURL(image)}\n                      alt=\"image\"\n                      style={{ height: \"inherit\", width: \"inherit\" }}\n                      className=\"p-2\"\n                    />\n                  ) : (\n                    <>\n                      {/* <span className=\"text-2xl\">+</span> */}\n                      <span>Browse Files</span>\n                      <span className=\"text-xs text-gray-400\">\n                        Supports JPG, PNG and MP4 videos. Max file size : 3MB.\n                      </span>\n                    </>\n                  )}\n                </div>\n                <input\n                  type=\"file\"\n                  required\n                  accept=\"image/*\"\n                  name=\"image\"\n                  className=\"absolute inset-0 opacity-0 text-transparent bg-transparent border-0\"\n                  multiple={false}\n                  onChange={(e) => setImage(e.target.files[0])}\n                />{\" \"}\n                <br />\n              </div>\n            </div>\n            <div className=\"md:w-3/5 w-full\">\n              <div className=\"mb-6\">\n                <label className=\"dark-text text-lg pb-2 font-semibold\">\n                  Title <span className=\"text-red-700\">*</span>\n                </label>\n                <br />\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.name}\n                  onChange={(e) =>\n                    setFormData({ ...formData, name: e.target.value })\n                  }\n                  placeholder=\"Project Title\"\n                  className=\"border text-gray-600  px-2 w-full py-2  focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"\n                />\n              </div>\n              <div className=\"mb-3\">\n                <label className=\"text-lg dark-text pb-2 font-semibold\">\n                  Description <span className=\"text-red-700\">*</span>\n                </label>\n                <br />\n                <textarea\n                  type=\"text\"\n                  rows=\"3\"\n                  required\n                  value={formData.description}\n                  onChange={(e) =>\n                    setFormData({ ...formData, description: e.target.value })\n                  }\n                  placeholder=\"Short Description(max 300 characters)\"\n                  maxLength=\"300\"\n                  className=\"border text-gray-600 mb-2 px-2 w-full py-1 focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"\n                />\n              </div>\n\n              <div className=\"mb-6\">\n                <label className=\"text-lg dark-text pb-2 font-semibold\">\n                  Social URL (optional)\n                </label>\n                <br />\n                <input\n                  type=\"text\"\n                  value={formData.external_url}\n                  onChange={(e) =>\n                    setFormData({ ...formData, external_url: e.target.value })\n                  }\n                  placeholder=\"Project URL\"\n                  className=\"border text-gray-600  px-2 w-full py-2 focus:outline-none rounded-lg transition duration-500 ease-in-out focus:ring-1 ring-black\"\n                />\n              </div>\n\n              <div className=\"mt-3\">\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"dark-bg light-text font-semibold text-lg py-2 w-40 rounded-2xl focus:outline-none focus:shadow-outline\"\n                >\n                  {loading ? \"minting...\" : \"Mint your NFT\"}\n                </button>\n                {txn_id && (\n                  <a\n                    href={`https://mumbai.polygonscan.com/tx/${txn_id}`}\n                    target=\"_blank\"\n                    className=\"text-sm underline block mt-4 dark-text\"\n                  >\n                    Click here to check Transaction\n                  </a>\n                )}\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}